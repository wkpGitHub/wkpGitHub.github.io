(self["webpackChunk_cci_cp_charts_play"]=self["webpackChunk_cci_cp_charts_play"]||[]).push([[870],{1538:(t,e,n)=>{var r=n(9219),i=n(5937),a=n(4054),s=n(9991),o=n(2753);function h(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype["delete"]=i,h.prototype.get=a,h.prototype.has=s,h.prototype.set=o,t.exports=h},624:(t,e,n)=>{var r=n(3647),i=n(73),a=n(7903),s=n(3832),o=n(7074);function h(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype["delete"]=i,h.prototype.get=a,h.prototype.has=s,h.prototype.set=o,t.exports=h},7973:(t,e,n)=>{var r=n(751),i=n(3401),a=r(i,"Map");t.exports=a},2767:(t,e,n)=>{var r=n(3070),i=n(3638),a=n(8444),s=n(5877),o=n(8990);function h(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype["delete"]=i,h.prototype.get=a,h.prototype.has=s,h.prototype.set=o,t.exports=h},14:(t,e,n)=>{var r=n(624),i=n(9882),a=n(6639),s=n(3887),o=n(2603),h=n(7853);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype["delete"]=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=h,t.exports=c},6293:(t,e,n)=>{var r=n(3401),i=r.Symbol;t.exports=i},9069:(t,e,n)=>{var r=n(3401),i=r.Uint8Array;t.exports=i},267:t=>{function e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=e},7189:(t,e,n)=>{var r=n(5606),i=n(3735),a=n(2428),s=n(7757),o=n(911),h=n(6868),c=Object.prototype,l=c.hasOwnProperty;function u(t,e){var n=a(t),c=!n&&i(t),u=!n&&!c&&s(t),d=!n&&!c&&!u&&h(t),p=n||c||u||d,f=p?r(t.length,String):[],g=f.length;for(var x in t)!e&&!l.call(t,x)||p&&("length"==x||u&&("offset"==x||"parent"==x)||d&&("buffer"==x||"byteLength"==x||"byteOffset"==x)||o(x,g))||f.push(x);return f}t.exports=u},5425:(t,e,n)=>{var r=n(897),i=n(3284);function a(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}t.exports=a},5100:(t,e,n)=>{var r=n(897),i=n(3284),a=Object.prototype,s=a.hasOwnProperty;function o(t,e,n){var a=t[e];s.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}t.exports=o},5869:(t,e,n)=>{var r=n(3284);function i(t,e){var n=t.length;while(n--)if(r(t[n][0],e))return n;return-1}t.exports=i},897:(t,e,n)=>{var r=n(7965);function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},8579:(t,e,n)=>{var r=n(6627),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},1431:(t,e,n)=>{var r=n(4257),i=r();t.exports=i},7398:(t,e,n)=>{var r=n(6293),i=n(6945),a=n(1584),s="[object Null]",o="[object Undefined]",h=r?r.toStringTag:void 0;function c(t){return null==t?void 0===t?o:s:h&&h in Object(t)?i(t):a(t)}t.exports=c},5227:(t,e,n)=>{var r=n(7398),i=n(9109),a="[object Arguments]";function s(t){return i(t)&&r(t)==a}t.exports=s},9578:(t,e,n)=>{var r=n(7419),i=n(3283),a=n(6627),s=n(9235),o=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(t){if(!a(t)||i(t))return!1;var e=r(t)?p:h;return e.test(s(t))}t.exports=f},9126:(t,e,n)=>{var r=n(7398),i=n(6705),a=n(9109),s="[object Arguments]",o="[object Array]",h="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",g="[object RegExp]",x="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",E="[object Int16Array]",D="[object Int32Array]",A="[object Uint8Array]",_="[object Uint8ClampedArray]",k="[object Uint16Array]",T="[object Uint32Array]",N={};function W(t){return a(t)&&i(t.length)&&!!N[r(t)]}N[w]=N[S]=N[M]=N[E]=N[D]=N[A]=N[_]=N[k]=N[T]=!0,N[s]=N[o]=N[y]=N[h]=N[b]=N[c]=N[l]=N[u]=N[d]=N[p]=N[f]=N[g]=N[x]=N[m]=N[v]=!1,t.exports=W},9177:(t,e,n)=>{var r=n(6627),i=n(2403),a=n(6087),s=Object.prototype,o=s.hasOwnProperty;function h(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}t.exports=h},6483:(t,e,n)=>{var r=n(14),i=n(5425),a=n(1431),s=n(6572),o=n(6627),h=n(3342),c=n(2065);function l(t,e,n,u,d){t!==e&&a(e,(function(a,h){if(d||(d=new r),o(a))s(t,e,h,n,l,u,d);else{var p=u?u(c(t,h),a,h+"",t,e,d):void 0;void 0===p&&(p=a),i(t,h,p)}}),h)}t.exports=l},6572:(t,e,n)=>{var r=n(5425),i=n(8057),a=n(2670),s=n(1984),o=n(1660),h=n(3735),c=n(2428),l=n(1392),u=n(7757),d=n(7419),p=n(6627),f=n(7066),g=n(6868),x=n(2065),m=n(2506);function v(t,e,n,v,y,b,w){var S=x(t,n),M=x(e,n),E=w.get(M);if(E)r(t,n,E);else{var D=b?b(S,M,n+"",t,e,w):void 0,A=void 0===D;if(A){var _=c(M),k=!_&&u(M),T=!_&&!k&&g(M);D=M,_||k||T?c(S)?D=S:l(S)?D=s(S):k?(A=!1,D=i(M,!0)):T?(A=!1,D=a(M,!0)):D=[]:f(M)||h(M)?(D=S,h(S)?D=m(S):p(S)&&!d(S)||(D=o(M))):A=!1}A&&(w.set(M,D),y(D,M,v,b,w),w["delete"](M)),r(t,n,D)}}t.exports=v},7063:(t,e,n)=>{var r=n(8958),i=n(8544),a=n(1863);function s(t,e){return a(i(t,e,r),t+"")}t.exports=s},3182:(t,e,n)=>{var r=n(5269),i=n(7965),a=n(8958),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=s},5606:t=>{function e(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}t.exports=e},2715:t=>{function e(t){return function(e){return t(e)}}t.exports=e},4675:(t,e,n)=>{var r=n(9069);function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}t.exports=i},8057:(t,e,n)=>{t=n.nmd(t);var r=n(3401),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?r.Buffer:void 0,h=o?o.allocUnsafe:void 0;function c(t,e){if(e)return t.slice();var n=t.length,r=h?h(n):new t.constructor(n);return t.copy(r),r}t.exports=c},2670:(t,e,n)=>{var r=n(4675);function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}t.exports=i},1984:t=>{function e(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}t.exports=e},2238:(t,e,n)=>{var r=n(5100),i=n(897);function a(t,e,n,a){var s=!n;n||(n={});var o=-1,h=e.length;while(++o<h){var c=e[o],l=a?a(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):r(n,c,l)}return n}t.exports=a},4640:(t,e,n)=>{var r=n(3401),i=r["__core-js_shared__"];t.exports=i},7207:(t,e,n)=>{var r=n(7063),i=n(7209);function a(t){return r((function(e,n){var r=-1,a=n.length,s=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;s=t.length>3&&"function"==typeof s?(a--,s):void 0,o&&i(n[0],n[1],o)&&(s=a<3?void 0:s,a=1),e=Object(e);while(++r<a){var h=n[r];h&&t(e,h,r,s)}return e}))}t.exports=a},4257:t=>{function e(t){return function(e,n,r){var i=-1,a=Object(e),s=r(e),o=s.length;while(o--){var h=s[t?o:++i];if(!1===n(a[h],h,a))break}return e}}t.exports=e},7965:(t,e,n)=>{var r=n(751),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},151:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},1499:(t,e,n)=>{var r=n(1889);function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=i},751:(t,e,n)=>{var r=n(9578),i=n(8027);function a(t,e){var n=i(t,e);return r(n)?n:void 0}t.exports=a},8187:(t,e,n)=>{var r=n(3518),i=r(Object.getPrototypeOf,Object);t.exports=i},6945:(t,e,n)=>{var r=n(6293),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r?r.toStringTag:void 0;function h(t){var e=a.call(t,o),n=t[o];try{t[o]=void 0;var r=!0}catch(h){}var i=s.call(t);return r&&(e?t[o]=n:delete t[o]),i}t.exports=h},8027:t=>{function e(t,e){return null==t?void 0:t[e]}t.exports=e},9219:(t,e,n)=>{var r=n(4556);function i(){this.__data__=r?r(null):{},this.size=0}t.exports=i},5937:t=>{function e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=e},4054:(t,e,n)=>{var r=n(4556),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;function o(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return s.call(e,t)?e[t]:void 0}t.exports=o},9991:(t,e,n)=>{var r=n(4556),i=Object.prototype,a=i.hasOwnProperty;function s(t){var e=this.__data__;return r?void 0!==e[t]:a.call(e,t)}t.exports=s},2753:(t,e,n)=>{var r=n(4556),i="__lodash_hash_undefined__";function a(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}t.exports=a},1660:(t,e,n)=>{var r=n(8579),i=n(8187),a=n(2403);function s(t){return"function"!=typeof t.constructor||a(t)?{}:r(i(t))}t.exports=s},911:t=>{var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(t,r){var i=typeof t;return r=null==r?e:r,!!r&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<r}t.exports=r},7209:(t,e,n)=>{var r=n(3284),i=n(1701),a=n(911),s=n(6627);function o(t,e,n){if(!s(n))return!1;var o=typeof e;return!!("number"==o?i(n)&&a(e,n.length):"string"==o&&e in n)&&r(n[e],t)}t.exports=o},1889:t=>{function e(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=e},3283:(t,e,n)=>{var r=n(4640),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function a(t){return!!i&&i in t}t.exports=a},2403:t=>{var e=Object.prototype;function n(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||e;return t===r}t.exports=n},3647:t=>{function e(){this.__data__=[],this.size=0}t.exports=e},73:(t,e,n)=>{var r=n(5869),i=Array.prototype,a=i.splice;function s(t){var e=this.__data__,n=r(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():a.call(e,n,1),--this.size,!0}t.exports=s},7903:(t,e,n)=>{var r=n(5869);function i(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}t.exports=i},3832:(t,e,n)=>{var r=n(5869);function i(t){return r(this.__data__,t)>-1}t.exports=i},7074:(t,e,n)=>{var r=n(5869);function i(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}t.exports=i},3070:(t,e,n)=>{var r=n(1538),i=n(624),a=n(7973);function s(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}t.exports=s},3638:(t,e,n)=>{var r=n(1499);function i(t){var e=r(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=i},8444:(t,e,n)=>{var r=n(1499);function i(t){return r(this,t).get(t)}t.exports=i},5877:(t,e,n)=>{var r=n(1499);function i(t){return r(this,t).has(t)}t.exports=i},8990:(t,e,n)=>{var r=n(1499);function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}t.exports=i},4556:(t,e,n)=>{var r=n(751),i=r(Object,"create");t.exports=i},6087:t=>{function e(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=e},126:(t,e,n)=>{t=n.nmd(t);var r=n(151),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s&&r.process,h=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=h},1584:t=>{var e=Object.prototype,n=e.toString;function r(t){return n.call(t)}t.exports=r},3518:t=>{function e(t,e){return function(n){return t(e(n))}}t.exports=e},8544:(t,e,n)=>{var r=n(267),i=Math.max;function a(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){var a=arguments,s=-1,o=i(a.length-e,0),h=Array(o);while(++s<o)h[s]=a[e+s];s=-1;var c=Array(e+1);while(++s<e)c[s]=a[s];return c[e]=n(h),r(t,this,c)}}t.exports=a},3401:(t,e,n)=>{var r=n(151),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},2065:t=>{function e(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=e},1863:(t,e,n)=>{var r=n(3182),i=n(9426),a=i(r);t.exports=a},9426:t=>{var e=800,n=16,r=Date.now;function i(t){var i=0,a=0;return function(){var s=r(),o=n-(s-a);if(a=s,o>0){if(++i>=e)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}t.exports=i},9882:(t,e,n)=>{var r=n(624);function i(){this.__data__=new r,this.size=0}t.exports=i},6639:t=>{function e(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=e},3887:t=>{function e(t){return this.__data__.get(t)}t.exports=e},2603:t=>{function e(t){return this.__data__.has(t)}t.exports=e},7853:(t,e,n)=>{var r=n(624),i=n(7973),a=n(2767),s=200;function o(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<s-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}t.exports=o},9235:t=>{var e=Function.prototype,n=e.toString;function r(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=r},5269:t=>{function e(t){return function(){return t}}t.exports=e},3284:t=>{function e(t,e){return t===e||t!==t&&e!==e}t.exports=e},8958:t=>{function e(t){return t}t.exports=e},3735:(t,e,n)=>{var r=n(5227),i=n(9109),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,h=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!o.call(t,"callee")};t.exports=h},2428:t=>{var e=Array.isArray;t.exports=e},1701:(t,e,n)=>{var r=n(7419),i=n(6705);function a(t){return null!=t&&i(t.length)&&!r(t)}t.exports=a},1392:(t,e,n)=>{var r=n(1701),i=n(9109);function a(t){return i(t)&&r(t)}t.exports=a},7757:(t,e,n)=>{t=n.nmd(t);var r=n(3401),i=n(8553),a=e&&!e.nodeType&&e,s=a&&t&&!t.nodeType&&t,o=s&&s.exports===a,h=o?r.Buffer:void 0,c=h?h.isBuffer:void 0,l=c||i;t.exports=l},7419:(t,e,n)=>{var r=n(7398),i=n(6627),a="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",h="[object Proxy]";function c(t){if(!i(t))return!1;var e=r(t);return e==s||e==o||e==a||e==h}t.exports=c},6705:t=>{var e=9007199254740991;function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}t.exports=n},6627:t=>{function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},9109:t=>{function e(t){return null!=t&&"object"==typeof t}t.exports=e},7066:(t,e,n)=>{var r=n(7398),i=n(8187),a=n(9109),s="[object Object]",o=Function.prototype,h=Object.prototype,c=o.toString,l=h.hasOwnProperty,u=c.call(Object);function d(t){if(!a(t)||r(t)!=s)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}t.exports=d},6868:(t,e,n)=>{var r=n(9126),i=n(2715),a=n(126),s=a&&a.isTypedArray,o=s?i(s):r;t.exports=o},3342:(t,e,n)=>{var r=n(7189),i=n(9177),a=n(1701);function s(t){return a(t)?r(t,!0):i(t)}t.exports=s},9867:(t,e,n)=>{var r=n(6483),i=n(7207),a=i((function(t,e,n){r(t,e,n)}));t.exports=a},8553:t=>{function e(){return!1}t.exports=e},2506:(t,e,n)=>{var r=n(2238),i=n(3342);function a(t){return r(t,i(t))}t.exports=a},2870:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>sn});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bar-container"},[e("div",[e("h4",[t._v("基础")]),e("Bar",{attrs:{options:t.baseOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("分组")]),e("Bar",{attrs:{options:t.groupOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("堆叠")]),e("Bar",{attrs:{options:t.stackOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("区间")]),e("Bar",{attrs:{options:t.sectionOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("自定义柱形图宽度、间距、旋转角度、颜色")]),e("Bar",{attrs:{options:t.angleOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("正负数")]),e("Bar",{attrs:{options:t.negativeOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("横向柱形图")]),e("Bar",{attrs:{options:t.horizOpts,width:"600px",height:"500px"}})],1),e("div",[e("h4",[t._v("环形柱形图")]),e("Bar",{attrs:{options:t.loopOpts,width:"600px",height:"500px"}})],1)])},i=[],a=function(){var t=this,e=t._self._c;return e("div",{ref:"bar",style:{width:t.width,height:t.height}})},s=[],o=n(5578);function h(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);while(++r<i)a[r]=t+r*n;return a}function c(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}class l extends Map{constructor(t,e=g){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(d(this,t))}has(t){return super.has(d(this,t))}set(t,e){return super.set(p(this,t),e)}delete(t){return super.delete(f(this,t))}}class u extends Set{constructor(t,e=g){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(d(this,t))}add(t){return super.add(p(this,t))}delete(t){return super.delete(f(this,t))}}function d({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function p({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function f({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function g(t){return null!==t&&"object"===typeof t?t.valueOf():t}const x=Symbol("implicit");function m(){var t=new l,e=[],n=[],r=x;function i(i){let a=t.get(i);if(void 0===a){if(r!==x)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new l;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return m(e,n).unknown(r)},c.apply(i,arguments),i}function v(){var t,e,n=m().unknown(void 0),r=n.domain,i=n.range,a=0,s=1,o=!1,l=0,u=0,d=.5;function p(){var n=r().length,c=s<a,p=c?s:a,f=c?a:s;t=(f-p)/Math.max(1,n-l+2*u),o&&(t=Math.floor(t)),p+=(f-p-t*(n-l))*d,e=t*(1-l),o&&(p=Math.round(p),e=Math.round(e));var g=h(n).map((function(e){return p+t*e}));return i(c?g.reverse():g)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),p()):r()},n.range=function(t){return arguments.length?([a,s]=t,a=+a,s=+s,p()):[a,s]},n.rangeRound=function(t){return[a,s]=t,a=+a,s=+s,o=!0,p()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,p()):o},n.padding=function(t){return arguments.length?(l=Math.min(1,u=+t),p()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),p()):l},n.paddingOuter=function(t){return arguments.length?(u=+t,p()):u},n.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),p()):d},n.copy=function(){return v(r(),[a,s]).round(o).paddingInner(l).paddingOuter(u).align(d)},c.apply(p(),arguments)}const y=Math.sqrt(50),b=Math.sqrt(10),w=Math.sqrt(2);function S(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=y?10:a>=b?5:a>=w?2:1;let o,h,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(t*c),h=Math.round(e*c),o/c<t&&++o,h/c>e&&--h,c=-c):(c=Math.pow(10,i)*s,o=Math.round(t/c),h=Math.round(e/c),o*c<t&&++o,h*c>e&&--h),h<o&&.5<=n&&n<2?S(t,e,2*n):[o,h,c]}function M(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?S(e,t,n):S(t,e,n);if(!(a>=i))return[];const o=a-i+1,h=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)h[c]=(a-c)/-s;else for(let c=0;c<o;++c)h[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)h[c]=(i+c)/-s;else for(let c=0;c<o;++c)h[c]=(i+c)*s;return h}function E(t,e,n){return e=+e,t=+t,n=+n,S(t,e,n)[2]}function D(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?E(e,t,n):E(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function A(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function k(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}function a(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}function s(t,e,n=0,a=t.length){const s=i(t,e,n,a-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s}return 2!==t.length?(e=A,n=(e,n)=>A(t(e),n),r=(e,n)=>t(e)-n):(e=t===A||t===_?t:T,n=t,r=t),{left:i,center:s,right:a}}function T(){return 0}function N(t){return null===t?NaN:+t}const W=k(A),j=W.right,L=(W.left,k(N).center,j);function O(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function P(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function C(){}var z=.7,I=1/z,R="\\s*([+-]?\\d+)\\s*",H="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y=/^#([0-9a-f]{3,8})$/,B=new RegExp(`^rgb\\(${R},${R},${R}\\)$`),G=new RegExp(`^rgb\\(${$},${$},${$}\\)$`),F=new RegExp(`^rgba\\(${R},${R},${R},${H}\\)$`),X=new RegExp(`^rgba\\(${$},${$},${$},${H}\\)$`),q=new RegExp(`^hsl\\(${H},${$},${$}\\)$`),Z=new RegExp(`^hsla\\(${H},${$},${$},${H}\\)$`),U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function K(){return this.rgb().formatHex()}function V(){return this.rgb().formatHex8()}function J(){return pt(this).formatHsl()}function Q(){return this.rgb().formatRgb()}function tt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Y.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?et(e):3===n?new at(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?nt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?nt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=B.exec(t))?new at(e[1],e[2],e[3],1):(e=G.exec(t))?new at(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=F.exec(t))?nt(e[1],e[2],e[3],e[4]):(e=X.exec(t))?nt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=q.exec(t))?dt(e[1],e[2]/100,e[3]/100,1):(e=Z.exec(t))?dt(e[1],e[2]/100,e[3]/100,e[4]):U.hasOwnProperty(t)?et(U[t]):"transparent"===t?new at(NaN,NaN,NaN,0):null}function et(t){return new at(t>>16&255,t>>8&255,255&t,1)}function nt(t,e,n,r){return r<=0&&(t=e=n=NaN),new at(t,e,n,r)}function rt(t){return t instanceof C||(t=tt(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function it(t,e,n,r){return 1===arguments.length?rt(t):new at(t,e,n,null==r?1:r)}function at(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function st(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function ot(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut(255*(isNaN(this.opacity)?1:this.opacity))}`}function ht(){const t=ct(this.opacity);return`${1===t?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${1===t?")":`, ${t})`}`}function ct(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ut(t){return t=lt(t),(t<16?"0":"")+t.toString(16)}function dt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gt(t,e,n,r)}function pt(t){if(t instanceof gt)return new gt(t.h,t.s,t.l,t.opacity);if(t instanceof C||(t=tt(t)),!t)return new gt;if(t instanceof gt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,h=(a+i)/2;return o?(s=e===a?(n-r)/o+6*(n<r):n===a?(r-e)/o+2:(e-n)/o+4,o/=h<.5?a+i:2-a-i,s*=60):o=h>0&&h<1?0:s,new gt(s,o,h,t.opacity)}function ft(t,e,n,r){return 1===arguments.length?pt(t):new gt(t,e,n,null==r?1:r)}function gt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function xt(t){return t=(t||0)%360,t<0?t+360:t}function mt(t){return Math.max(0,Math.min(1,t||0))}function vt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function yt(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function bt(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return yt((n-r/e)*e,s,i,a,o)}}function wt(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],s=t[(r+1)%e],o=t[(r+2)%e];return yt((n-r/e)*e,i,a,s,o)}}O(C,tt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:K,formatHex:K,formatHex8:V,formatHsl:J,formatRgb:Q,toString:Q}),O(at,it,P(C,{brighter(t){return t=null==t?I:Math.pow(I,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?z:Math.pow(z,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(lt(this.r),lt(this.g),lt(this.b),ct(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:st,formatHex:st,formatHex8:ot,formatRgb:ht,toString:ht})),O(gt,ft,P(C,{brighter(t){return t=null==t?I:Math.pow(I,t),new gt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?z:Math.pow(z,t),new gt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new at(vt(t>=240?t-240:t+120,i,r),vt(t,i,r),vt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new gt(xt(this.h),mt(this.s),mt(this.l),ct(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ct(this.opacity);return`${1===t?"hsl(":"hsla("}${xt(this.h)}, ${100*mt(this.s)}%, ${100*mt(this.l)}%${1===t?")":`, ${t})`}`}}));const St=t=>()=>t;function Mt(t,e){return function(n){return t+n*e}}function Et(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Dt(t){return 1===(t=+t)?At:function(e,n){return n-e?Et(e,n,t):St(isNaN(e)?n:e)}}function At(t,e){var n=e-t;return n?Mt(t,n):St(isNaN(t)?e:t)}const _t=function t(e){var n=Dt(e);function r(t,e){var r=n((t=it(t)).r,(e=it(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),s=At(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function kt(t){return function(e){var n,r,i=e.length,a=new Array(i),s=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=it(e[n]),a[n]=r.r||0,s[n]=r.g||0,o[n]=r.b||0;return a=t(a),s=t(s),o=t(o),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=o(t),r+""}}}kt(bt),kt(wt);function Tt(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=Ht(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=a[n](t);return s}}function Nt(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Wt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jt(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Ht(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Lt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ot=new RegExp(Lt.source,"g");function Pt(t){return function(){return t}}function Ct(t){return function(e){return t(e)+""}}function zt(t,e){var n,r,i,a=Lt.lastIndex=Ot.lastIndex=0,s=-1,o=[],h=[];t+="",e+="";while((n=Lt.exec(t))&&(r=Ot.exec(e)))(i=r.index)>a&&(i=e.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,h.push({i:s,x:Wt(n,r)})),a=Ot.lastIndex;return a<e.length&&(i=e.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?h[0]?Ct(h[0].x):Pt(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)o[(n=h[r]).i]=n.x(t);return o.join("")})}function It(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Rt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ht(t,e){var n,r=typeof e;return null==e||"boolean"===r?St(e):("number"===r?Wt:"string"===r?(n=tt(e))?(e=n,_t):zt:e instanceof tt?_t:e instanceof Date?Nt:Rt(e)?It:Array.isArray(e)?Tt:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?jt:Wt)(t,e)}function $t(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Yt(t){return function(){return t}}function Bt(t){return+t}var Gt=[0,1];function Ft(t){return t}function Xt(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yt(isNaN(e)?NaN:.5)}function qt(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function Zt(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Xt(i,r),a=n(s,a)):(r=Xt(r,i),a=n(a,s)),function(t){return a(r(t))}}function Ut(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++s<r)i[s]=Xt(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=L(t,e,1,r)-1;return a[n](i[n](e))}}function Kt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Vt(){var t,e,n,r,i,a,s=Gt,o=Gt,h=Ht,c=Ft;function l(){var t=Math.min(s.length,o.length);return c!==Ft&&(c=qt(s[0],s[t-1])),r=t>2?Ut:Zt,i=a=null,u}function u(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),o,h)))(t(c(e)))}return u.invert=function(n){return c(e((a||(a=r(o,s.map(t),Wt)))(n)))},u.domain=function(t){return arguments.length?(s=Array.from(t,Bt),l()):s.slice()},u.range=function(t){return arguments.length?(o=Array.from(t),l()):o.slice()},u.rangeRound=function(t){return o=Array.from(t),h=$t,l()},u.clamp=function(t){return arguments.length?(c=!!t||Ft,l()):c!==Ft},u.interpolate=function(t){return arguments.length?(h=t,l()):h},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,r){return t=n,e=r,l()}}function Jt(){return Vt()(Ft,Ft)}var Qt,te=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ee(t){if(!(e=te.exec(t)))throw new Error("invalid format: "+t);var e;return new ne({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ne(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function re(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ie(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ae(t){return t=ie(Math.abs(t)),t?t[1]:NaN}function se(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ae(e)/3)))-ae(Math.abs(t)))}function oe(t,e){return function(n,r){var i=n.length,a=[],s=0,o=t[0],h=0;while(i>0&&o>0){if(h+o+1>r&&(o=Math.max(1,r-h)),a.push(n.substring(i-=o,i+o)),(h+=o+1)>r)break;o=t[s=(s+1)%t.length]}return a.reverse().join(e)}}function he(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}function ce(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t}function le(t,e){var n=ie(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Qt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ie(t,Math.max(0,e+a-1))[0]}function ue(t,e){var n=ie(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ee.prototype=ne.prototype,ne.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const de={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:re,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ue(100*t,e),r:ue,s:le,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pe(t){return t}var fe,ge,xe,me=Array.prototype.map,ve=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ye(t){var e=void 0===t.grouping||void 0===t.thousands?pe:oe(me.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?pe:he(me.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function c(t){t=ee(t);var c=t.fill,l=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,x=t.precision,m=t.trim,v=t.type;"n"===v?(g=!0,v="g"):de[v]||(void 0===x&&(x=12),m=!0,v="g"),(p||"0"===c&&"="===l)&&(p=!0,c="0",l="=");var y="$"===d?n:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?r:/[%p]/.test(v)?s:"",w=de[v],S=/[defgprs%]/.test(v);function M(t){var n,r,s,d=y,M=b;if("c"===v)M=w(t)+M,t="";else{t=+t;var E=t<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),x),m&&(t=ce(t)),E&&0===+t&&"+"!==u&&(E=!1),d=(E?"("===u?u:o:"-"===u||"("===u?"":u)+d,M=("s"===v?ve[8+Qt/3]:"")+M+(E&&"("===u?")":""),S){n=-1,r=t.length;while(++n<r)if(s=t.charCodeAt(n),48>s||s>57){M=(46===s?i+t.slice(n+1):t.slice(n))+M,t=t.slice(0,n);break}}}g&&!p&&(t=e(t,1/0));var D=d.length+t.length+M.length,A=D<f?new Array(f-D+1).join(c):"";switch(g&&p&&(t=e(A+t,A.length?f-M.length:1/0),A=""),l){case"<":t=d+t+M+A;break;case"=":t=d+A+t+M;break;case"^":t=A.slice(0,D=A.length>>1)+d+t+M+A.slice(D);break;default:t=A+d+t+M;break}return a(t)}return x=void 0===x?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),M.toString=function(){return t+""},M}function l(t,e){var n=c((t=ee(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ae(e)/3))),i=Math.pow(10,-r),a=ve[8+r/3];return function(t){return n(i*t)+a}}return{format:c,formatPrefix:l}}function be(t){return fe=ye(t),ge=fe.format,xe=fe.formatPrefix,fe}function we(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ae(e)-ae(t))+1}function Se(t){return Math.max(0,-ae(Math.abs(t)))}function Me(t,e,n,r){var i,a=D(t,e,n);switch(r=ee(null==r?",f":r),r.type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=se(a,s))||(r.precision=i),xe(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=we(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Se(a))||(r.precision=i-2*("%"===r.type));break}return ge(r)}function Ee(t){var e=t.domain;return t.ticks=function(t){var n=e();return M(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Me(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),s=0,o=a.length-1,h=a[s],c=a[o],l=10;c<h&&(i=h,h=c,c=i,i=s,s=o,o=i);while(l-- >0){if(i=E(h,c,n),i===r)return a[s]=h,a[o]=c,e(a);if(i>0)h=Math.floor(h/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;h=Math.ceil(h*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function De(){var t=Jt();return t.copy=function(){return Kt(t,De())},c.apply(t,arguments),Ee(t)}be({thousands:",",grouping:[3],currency:["$",""]});const Ae=new o.Pa4,_e=new o._fP,ke=new o.Pa4;class Te extends o.Tme{constructor(t=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}const Ne=new o.yGw,We=new o.yGw;class je{constructor(t={}){const e=this;let n,r,i,a;const s={camera:{fov:0,style:""},objects:new WeakMap},o=void 0!==t.element?t.element:document.createElement("div");o.style.overflow="hidden",this.domElement=o;const h=document.createElement("div");function c(t){return Math.abs(t)<1e-10?0:t}function l(t){const e=t.elements;return"matrix3d("+c(e[0])+","+c(-e[1])+","+c(e[2])+","+c(e[3])+","+c(e[4])+","+c(-e[5])+","+c(e[6])+","+c(e[7])+","+c(e[8])+","+c(-e[9])+","+c(e[10])+","+c(e[11])+","+c(e[12])+","+c(-e[13])+","+c(e[14])+","+c(e[15])+")"}function u(t){const e=t.elements,n="matrix3d("+c(e[0])+","+c(e[1])+","+c(e[2])+","+c(e[3])+","+c(-e[4])+","+c(-e[5])+","+c(-e[6])+","+c(-e[7])+","+c(e[8])+","+c(e[9])+","+c(e[10])+","+c(e[11])+","+c(e[12])+","+c(e[13])+","+c(e[14])+","+c(e[15])+")";return"translate(-50%,-50%)"+n}function d(t,n,r,i){if(t.isCSS3DObject){const i=!0===t.visible&&!0===t.layers.test(r.layers);if(t.element.style.display=!0===i?"":"none",!0===i){let i;t.onBeforeRender(e,n,r),t.isCSS3DSprite?(Ne.copy(r.matrixWorldInverse),Ne.transpose(),0!==t.rotation2D&&Ne.multiply(We.makeRotationZ(t.rotation2D)),t.matrixWorld.decompose(Ae,_e,ke),Ne.setPosition(Ae),Ne.scale(ke),Ne.elements[3]=0,Ne.elements[7]=0,Ne.elements[11]=0,Ne.elements[15]=1,i=u(Ne)):i=u(t.matrixWorld);const a=t.element,o=s.objects.get(t);if(void 0===o||o.style!==i){a.style.transform=i;const e={style:i};s.objects.set(t,e)}a.parentNode!==h&&h.appendChild(a),t.onAfterRender(e,n,r)}}for(let e=0,a=t.children.length;e<a;e++)d(t.children[e],n,r,i)}h.style.transformStyle="preserve-3d",h.style.pointerEvents="none",o.appendChild(h),this.getSize=function(){return{width:n,height:r}},this.render=function(t,e){const n=e.projectionMatrix.elements[5]*a;let r,u;s.camera.fov!==n&&(o.style.perspective=e.isPerspectiveCamera?n+"px":"",s.camera.fov=n),!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),e.isOrthographicCamera&&(r=-(e.right+e.left)/2,u=(e.top+e.bottom)/2);const p=e.isOrthographicCamera?"scale("+n+")translate("+c(r)+"px,"+c(u)+"px)"+l(e.matrixWorldInverse):"translateZ("+n+"px)"+l(e.matrixWorldInverse),f=p+"translate("+i+"px,"+a+"px)";s.camera.style!==f&&(h.style.transform=f,s.camera.style=f),d(t,t,e,p)},this.setSize=function(t,e){n=t,r=e,i=n/2,a=r/2,o.style.width=t+"px",o.style.height=e+"px",h.style.width=t+"px",h.style.height=e+"px"}}}var Le=n(1871);function Oe(t){if(t>=1){const e=String(Math.ceil(t)).length-1,n="1"+Array.from({length:e}).fill("0").join("");t=Math.ceil(t/Number(n))*Number(n)}else{let e=String(t).length-4;e=e>=1?e:1;const n="1"+Array.from({length:e}).fill("0").join("");t=Math.ceil(t*Number(n))/Number(n)}return t}function Pe(t){var e=Math.max(...t),n=Math.min(...t);if(e>=0&&n>=0)e=Oe(e),n=0;else if(e>=0&&n<0){e=Oe(e),n=-Oe(-n);const t=4;if(e>=Math.abs(n)){let r=e/t;for(let e=0;e<=t;e++)if(r*e>=Math.abs(n)){n=-r*e;break}}else{let r=Math.abs(n)/t;for(let n=0;n<=t;n++)if(r*n>=e){e=r*n;break}}}else e=0,n=-Oe(-n);return{maxData:e,minData:n}}function Ce(t){let e={};t.forEach((t=>{t.originData=[...t.data],t.stack&&(t.data.forEach(((n,r)=>{t.data[r]+=e[t.stack]?.[r]||0})),e[t.stack]=t.data)}))}function ze(t){const e={};return t.forEach(((t,n)=>{e[t.stack||n]=!0})),Object.keys(e).length}function Ie(t){const e=new o.Ilk(t),n={r:e.r,g:e.g,b:e.b},r=e.getHSL(n);return e.setHSL(r.h,r.s,.56*r.l),{...n,r2:e.r,g2:e.g,b2:e.b}}function Re(t){const e=[],{r:n,g:r,b:i,r2:a,g2:s,b2:h}=Ie(t);for(let o=0;o<4;o++)o<2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)o<2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)e.push(n,r,i);for(let o=0;o<4;o++)e.push(a,s,h);for(let o=0;o<4;o++)o<2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)o<2?e.push(n,r,i):e.push(a,s,h);return new o.a$l(e,3)}function He(t){const e=[],{r:n,g:r,b:i,r2:a,g2:s,b2:h}=Ie(t);for(let o=0;o<4;o++)e.push(n,r,i);for(let o=0;o<4;o++)e.push(a,s,h);for(let o=0;o<4;o++)o%2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)o%2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)o%2?e.push(n,r,i):e.push(a,s,h);for(let o=0;o<4;o++)o%2?e.push(n,r,i):e.push(a,s,h);return new o.a$l(e,3)}function $e(t,e){return e?He(t):Re(t)}const Ye={legend:{show:!0,data:[]},grid:{left:80,right:20,top:20,bottom:80},grid3D:{background:{show:!0,opacity:.1,color:"#fff"},boxWidth:null,barAngle:0,minZoom:4,maxZoom:4},xAxis:{show:!0,axisLabel:{show:!0,fontSize:20,color:"#999"},axisLine:{show:!0,lineStyle:{color:"#999",width:1}},splitLine:{show:!0,lineStyle:{color:"#999",width:1}},data:[]},yAxis:{show:!0,axisLabel:{show:!0,fontSize:20,color:"#999"},axisLine:{show:!0,lineStyle:{color:"#999",width:1}},splitLine:{show:!0,lineStyle:{color:"#999",width:1}}},color:["#2a9cff","#27e89e","#ffd938","#eb55f7","#3864ff","#ff4069","#aa8afb","#ffaa63"]};class Be{addScene(){this.scene=new o.xsS,this.textScene=new o.xsS;const t=this.scene.add;this.scene.add=e=>{e.isCamera||e.isLight||this.sceneChildren.push(e),t.call(this.scene,e)};const e=this.textScene.add;this.textScene.add=t=>{this.textSceneChildren.push(t),e.call(this.textScene,t)}}addLight(){this.scene.add(new o.Mig(16777215,.5));const t=new o.Ox3;t.position.set(-this.canvasWidth,this.canvasHeight,1.5*Math.max(this.canvasWidth,this.canvasHeight)),this.scene.add(t)}addCamera(){this.camera=new o.cPb(30,this.canvasWidth/this.canvasHeight,.1,6e4),this.canvasWidth>this.canvasHeight?this.camera.position.set(0,0,Math.min(this.canvasWidth,this.canvasHeight)/Math.sin(Math.PI/12)):this.camera.position.set(0,0,Math.max(this.canvasWidth,this.canvasHeight)/Math.sin(Math.PI/12)),this.camera.position.set(0,0,this.canvasHeight/Math.sin(Math.PI/12)),this.scene.add(this.camera)}addRenderer(){const{canvasWidth:t,canvasHeight:e}=this;this.renderer=new o.CP7({antialias:!0,alpha:!0}),this.renderer.setSize(t,e),this.el.appendChild(this.renderer.domElement),this.textRenderer=new je,this.textRenderer.domElement.style.position="absolute",this.textRenderer.domElement.style.top=0,this.textRenderer.domElement.style.fontSize="20px",this.textRenderer.setSize(t,e),this.el.appendChild(this.textRenderer.domElement)}addControls(){this.controls=new Le.z(this.camera,this.textRenderer.domElement),this.controls.enableDamping=!0,this.setZoom()}setZoom(){const{opts:{grid3D:t},camera:e,controls:n}=this,r=e.position.z;n.minDistance=r/t.maxZoom,n.maxDistance=r*t.minZoom}onMouseLeave=()=>{this.TIPDOM&&(this.TIPDOM.style.display="none")};onPointerMove=t=>{const{x:e,y:n}=this.el.getBoundingClientRect();let{pointer:r,TIPDOM:i}=this;if(r.x=(t.clientX-e)/this.canvasWidth*2-1,r.y=-(t.clientY-n)/this.canvasHeight*2+1,this.INTERSECTED&&0!==this.INTERSECTED.material.opacity){const{itemData:e}=this.INTERSECTED;i?(Object.assign(i.style,{top:`${t.clientY+16}px`,left:`${t.clientX+16}px`,display:"block"}),i.innerHTML=`<div style="font-weight: bold">${e.x}</div>${e.name}: ${e.y}`):(this.TIPDOM=document.createElement("div"),this.TIPDOM.innerHTML=`<div style="font-weight: bold">${e.x}</div>${e.name}: ${e.y}`,Object.assign(this.TIPDOM.style,{background:"#fff",position:"fixed",top:`${t.clientY+16}px`,left:`${t.clientX+16}px`,borderRadius:"4px",padding:"10px",color:"#333",zIndex:2e3}),document.body.appendChild(this.TIPDOM))}else i&&(i.style.display="none")};destroy(){this.scene.children.forEach((t=>this.scene.remove(t))),this.textScene.children.forEach((t=>this.textScene.remove(t))),this.resizeObser.disconnect(),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseleave",this.onMouseLeave),this.textRenderer.domElement.remove(),this.renderer.clear(),this.renderer.domElement.remove(),this.TIPDOM&&this.TIPDOM.remove()}clear(){while(this.sceneChildren.length){let t=this.sceneChildren.pop();this.scene.remove(t)}while(this.textSceneChildren.length){let t=this.textSceneChildren.pop();this.textScene.remove(t)}this.textRenderer.domElement.children[0].replaceChildren()}render=()=>{let{raycaster:t,camera:e,scene:n,textScene:r,controls:i,pointer:a}=this;t.setFromCamera(a,e);const s=t.intersectObjects(n.children.filter((t=>t.isGroup)),!0);s.length>0?this.INTERSECTED!=s[0].object&&(this.INTERSECTED&&(this.INTERSECTED.material.color=this.INTERSECTED.currentHex),this.INTERSECTED=s[0].object,this.INTERSECTED.currentHex=this.INTERSECTED.material.color,this.INTERSECTED.material.color=new o.Ilk(16711680)):(this.INTERSECTED&&(this.INTERSECTED.material.color=this.INTERSECTED.currentHex),this.INTERSECTED=null),i.update(),this.renderer.render(n,e),this.textRenderer.render(r,e),requestAnimationFrame(this.render)};createLegend(){const{legend:t,color:e}=this.opts;if(!t.show)return!1;const n=document.createElement("div"),r=document.createElement("ul");Object.assign(r.style,{display:"flex"});let i=[];t.data.forEach(((n,a)=>{const s=document.createElement("li");Object.assign(s.style,{alignItems:"center",marginRight:"48px",color:"#999",display:"flex",fontSize:"30px",cursor:"pointer",flexShrink:0}),s.innerHTML=`<div style="width: 24px; height: 24px; background: ${e[a%e.length]}; margin-right: 8px;"></div>${t.data[a]}`,r.appendChild(s),s.addEventListener("mouseenter",(t=>{let e=t.target.textContent,n=this.scene.children.filter((t=>t.isGroup));n.forEach((t=>{t.children.forEach((t=>{t.itemData.name===e&&(i.push(t),t.hex=t.material.color)}))})),i.forEach((t=>t.material.color=new o.Ilk(16711680)))})),s.addEventListener("mouseleave",(()=>{i.forEach((t=>t.material.color=t.hex)),i=[]}))})),n.appendChild(r);const a=new Te(n);a.position.set(0,40-this.canvasHeight,0),a.isLegend=!0,this.textScene.add(a)}getColor(t){const{color:e}=this.opts;return e[t%e.length]||"#2a9cff"}}var Ge=n(9867);class Fe extends Be{constructor(t,e={}){super(),this.el=t,t.style.position="relative",this.opts=Ge({},Ye,e);const{grid3D:n,xAxis:r,series:i}=this.opts;this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,this.xAxixWidth=n.boxWidth||this.canvasWidth,this.xData=r.data,Ce(i),this.setMaxAndMin(),this.INTERSECTED=null,this.TIPDOM=null,this.raycaster=new o.iMs,this.pointer=new o.FM8,this.sceneChildren=[],this.textSceneChildren=[],this.seriesStackNum=ze(i),this.init()}init(){this.createScale(),this.addScene(),this.addLight(),this.addCamera(),this.createLegend(),this.createXAxis(),this.createYAxis(),this.createBgPlane(),this.createBarGroup(),this.addRenderer(),this.addControls(),this.render(),document.addEventListener("mousemove",this.onPointerMove),document.addEventListener("mouseleave",this.onMouseLeave),this.resize()}update(t={}){this.opts=Ge({},Ye,t),this.clear();const{grid3D:e,xAxis:n,series:r}=this.opts;this.xAxixWidth=e.boxWidth||this.canvasWidth,this.xData=n.data,r.forEach((t=>{t.originData&&(t.data=t.originData)})),Ce(r),this.setMaxAndMin(),this.seriesStackNum=ze(r),this.createScale(),this.createLegend(),this.createXAxis(),this.createYAxis(),this.createBgPlane(),this.createBarGroup()}resize(){this.resizeObser=new ResizeObserver((()=>{const{renderer:t,textRenderer:e,el:n,camera:r}=this;this.canvasWidth=n.clientWidth,this.canvasHeight=n.clientHeight,r.aspect=this.canvasWidth/this.canvasHeight,r.updateProjectionMatrix(),t.setSize(this.canvasWidth,this.canvasHeight),t.setPixelRatio(window.devicePixelRatio),e.setSize(this.canvasWidth,this.canvasHeight)})),this.resizeObser.observe(this.el)}setMaxAndMin(){var t=[];this.opts.series.forEach((e=>{t=t.concat(e.data)}));const e=Pe(t);this.maxData=e.maxData,this.minData=e.minData}getBarWidth(){let t=100/this.seriesStackNum/2+"%",{barWidth:e=t,barGap:n=0}=this.opts.grid3D;return e="number"===typeof e?e:2*this.xWidth*parseFloat(e)/100,n="number"===typeof n?n:this.xWidth*parseFloat(n)/100,{barWidth:e,barGap:n}}getGripY(){return(this.opts.grid.top-this.opts.grid.bottom)/2}createScale(){const{grid:t}=this.opts;this.xScale=v().domain(this.xData).range([-this.xAxixWidth+2*t.left,this.xAxixWidth-2*t.right]),this.xWidth=this.xScale.bandwidth()/2,this.yScale=De().domain([this.minData,this.maxData]).range([0,2*(this.canvasHeight-t.top-t.bottom)]),this.maxHeight=this.yScale(this.maxData),this.zeroHeight=this.yScale(0)}createXText(t,e,n,r=0){const{opts:{xAxis:i}}=this,a=document.createElement("span");a.innerText=t,a.style.color=i.axisLabel.color,a.style.fontSize=i.axisLabel.fontSize+"px";const s=new Te(a);s.position.set(e,n,r),this.textScene.add(s)}createXAxis(){const{xScale:t,scene:e,xData:n,maxHeight:r,xWidth:i,opts:{xAxis:a}}=this;if(!a.show)return!1;if(a.axisLine.show){const s=[];s.push(new o.Pa4(t(n[0]),-r/2-this.getGripY(),0)),s.push(new o.Pa4(t(n[n.length-1])+2*i,-r/2-this.getGripY(),0));const h=(new o.u9r).setFromPoints(s),c=new o.x12(h,new o.nls({color:a.axisLine.lineStyle.color,linewidth:a.axisLine.lineStyle.width}));e.add(c)}a.axisLabel.show&&n.forEach((e=>{const n=-r/2-this.getGripY()-40;this.createXText(e,t(e)+i,n)}))}createYText(t,e,n){const{maxData:r,maxHeight:i,xScale:a,xData:s,textScene:o,opts:{yAxis:h}}=this,c=document.createElement("span"),l=String(r).length*h.axisLabel.fontSize*2;c.style.width=l+"px",c.style.textAlign="right",c.style.color=h.axisLabel.color,c.style.fontSize=h.axisLabel.fontSize+"px",c.innerText=t;const u=new Te(c);n=n||a(s[0])-l/2-20,u.position.set(n,-i/2+e-this.getGripY(),0),o.add(u)}createYSplitLine(t,e){const{xScale:n,xData:r,maxHeight:i,xWidth:a,scene:s,opts:{yAxis:h}}=this;if(!h.splitLine.show)return!1;const{barWidth:c}=this.getBarWidth(),l=[],u=n(r[0]);l.push(new o.Pa4(u,-i/2-this.getGripY()+t,0)),l.push(new o.Pa4(u,-i/2-this.getGripY()+t,0)),l.push(new o.Pa4(u,-i/2-this.getGripY()+t,2*-c)),l.push(new o.Pa4(n(r[r.length-1])+2*a,-i/2-this.getGripY()+t,2*-c));const d=(new o.u9r).setFromPoints(l),p=new o.x12(d,e?new o.FT0({color:h.splitLine.lineStyle.color,dashSize:1}):new o.nls({color:h.splitLine.lineStyle.color}));p.computeLineDistances(),s.add(p)}createMarkLine(t,e){const{yScale:n,xScale:r,xData:i,maxHeight:a,scene:s,xWidth:h}=this,c=n(t),l=r(i[0]),u=r(i[i.length-1])+2*h,d=[];d.push(new o.Pa4(l,-a/2-this.getGripY()+c,0)),d.push(new o.Pa4(u,-a/2-this.getGripY()+c,0));const p=(new o.u9r).setFromPoints(d),f=new o.x12(p,new o.FT0({color:this.getColor(e),dashSize:1}));f.computeLineDistances(),s.add(f),this.createYText(t,c,u)}createYAxis(){const{xScale:t,xData:e,maxHeight:n,scene:r,opts:{yAxis:i}}=this;if(!i.show)return!1;if(i.axisLine.show){const a=[];a.push(new o.Pa4(t(e[0]),-n/2-this.getGripY(),0)),a.push(new o.Pa4(t(e[0]),n/2-this.getGripY(),0));const s=new o.x12((new o.u9r).setFromPoints(a),new o.nls({color:i.axisLine.lineStyle.color,linewidth:i.axisLine.lineStyle.width}));r.add(s)}this.addYText()}addYText(){const{maxData:t,minData:e,yScale:n,opts:{yAxis:r}}=this;let i=4,a=0;if(t>=0&&0===e)a=t/i;else if(t>0&&e<0){let s=4;t>=Math.abs(e)?(a=t/i,s=Math.abs(e)/a):(a=Math.abs(e)/s,i=t/a);for(let t=0;t<=s;t++){const e=-t*a*1e10/1e10;r.axisLabel.show&&this.createYText(e,n(e)),this.createYSplitLine(n(e),t>0)}}else 0===t&&e<0&&(a=e/i);for(let s=0;s<=i;s++){const t=s*a*1e10/1e10;r.axisLabel.show&&this.createYText(t,n(t)),this.createYSplitLine(n(t),s>0)}}createBgPlane(){const{xData:t,maxHeight:e,scene:n,xWidth:r,opts:{grid:i,grid3D:a}}=this;if(!a.background.show)return!1;const{barWidth:s}=this.getBarWidth(),h=new o._12(2*r*t.length,e),c={transparent:!0,side:o.ehD,...a.background};delete c.show;const l=new o.Kj0(h,new o.YBo(c));l.position.set(Math.abs(i.left-i.right),-this.getGripY(),2*-s),n.add(l)}createBar(t,e,n){const{xData:r,maxHeight:i,zeroHeight:a,yScale:s,opts:h}=this,{barWidth:c,barGap:l}=this.getBarWidth(),{itemStyle:u={},data:d=[],originData:p=[],name:f}=h.series[e],g=s(p[n]),x=s(d[n]-p[n]),m=g-a,v=new o.DvJ(c,Math.abs(m),c);v.setAttribute("color",$e("#fff"));const y=new o.YBo({color:this.getColor(e),vertexColors:!0,transparent:!0,...u}),b=new o.Kj0(v,y);return b.position.set(t*(c+l),-(i-m)/2+x-this.getGripY(),0),b.itemData={x:r[n],y:p[n],name:f},h.grid3D.barAngle&&(b.rotation.y=Math.PI*h.grid3D.barAngle/180),b}createBarGroup(){const{xData:t,xScale:e,xWidth:n,scene:r,opts:i}=this,a=[],s=Array.from({length:t.length},(()=>new o.ZAu));i.series.forEach(((t,e)=>{t.markLine&&this.createMarkLine(t.markLine.value,e),a.find((e=>e===t.stack))||(t.stack?a.push(t.stack):a.push(e));const n=a.findIndex((n=>n===(t.stack||e)));t.data.forEach(((t,r)=>{if(r<s.length){const t=this.createBar(n,e,r);s[r].add(t),s[r].barNum=a.length}}))}));const{barWidth:h,barGap:c}=this.getBarWidth();s.forEach(((i,a)=>{let s=0;Array.from({length:i.barNum}).forEach(((t,e)=>{s+=0===e?h:c+h}));const o=e(t[a]);i.position.set(o+h/2-s/2+n,0,-h),r.add(i)}))}}class Xe extends Be{constructor(t,e={}){super(),this.el=t,t.style.position="relative",this.opts=Ge({},Ye,e);const{grid3D:n,yAxis:r,series:i}=this.opts;this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,this.xAxixWidth=n.boxWidth||this.canvasWidth,this.yData=r.data,Ce(i),this.setMaxAndMin(),this.INTERSECTED=null,this.TIPDOM=null,this.raycaster=new o.iMs,this.pointer=new o.FM8,this.sceneChildren=[],this.textSceneChildren=[],this.seriesStackNum=ze(i),this.init()}init(){this.createScale(),this.addScene(),this.addLight(),this.addCamera(),this.createLegend(),this.createYAxis(),this.createXAxis(),this.createBgPlane(),this.createBarGroup(),this.addRenderer(),this.addControls(),this.render(),document.addEventListener("mousemove",this.onPointerMove),document.addEventListener("mouseleave",this.onMouseLeave),this.resize()}update(t={}){this.opts=Ge({},Ye,t),this.clear();const{grid3D:e,yAxis:n,series:r}=this.opts;this.xAxixWidth=e.boxWidth||this.canvasWidth,this.yData=n.data,r.forEach((t=>{t.originData&&(t.data=t.originData)})),Ce(r),this.setMaxAndMin(),this.seriesStackNum=ze(r),this.createScale(),this.createLegend(),this.createYAxis(),this.createXAxis(),this.createBgPlane(),this.createBarGroup()}resize(){this.resizeObser=new ResizeObserver((()=>{const{renderer:t,textRenderer:e,el:n,camera:r}=this;this.canvasWidth=n.clientWidth,this.canvasHeight=n.clientHeight,r.aspect=this.canvasWidth/this.canvasHeight,r.updateProjectionMatrix(),t.setSize(this.canvasWidth,this.canvasHeight),t.setPixelRatio(window.devicePixelRatio),e.setSize(this.canvasWidth,this.canvasHeight)})),this.resizeObser.observe(this.el)}setMaxAndMin(){var t=[];this.opts.series.forEach((e=>{t=t.concat(e.data)}));const e=Pe(t);this.maxData=e.maxData,this.minData=e.minData}getBarWidth(){let t=100/this.seriesStackNum/2+"%",{barWidth:e=t,barGap:n=0}=this.opts.grid3D;return e="number"===typeof e?e:2*this.yWidth*parseFloat(e)/100,n="number"===typeof n?n:this.yWidth*parseFloat(n)/100,{barWidth:e,barGap:n}}getGripY(){return(this.opts.grid.left-this.opts.grid.right)/2}createScale(){const{grid:t}=this.opts;this.yScale=v().domain(this.yData).range([-this.canvasHeight+2*t.bottom,this.canvasHeight-2*t.top]),this.yWidth=this.yScale.bandwidth()/2,this.xScale=De().domain([this.minData,this.maxData]).range([0,2*(this.xAxixWidth-t.left-t.right)]),this.maxHeight=this.xScale(this.maxData),this.zeroHeight=this.xScale(0)}createXText(t,e,n,r=0){const{maxHeight:i,opts:{xAxis:a}}=this,s=document.createElement("span");s.innerText=t,s.style.color=a.axisLabel.color,s.style.fontSize=a.axisLabel.fontSize+"px";const o=new Te(s);o.position.set(-i/2+e-this.getGripY(),n-40,r),this.textScene.add(o)}createYAxis(){const{yScale:t,scene:e,yData:n,maxHeight:r,yWidth:i,opts:{yAxis:a}}=this;if(!a.show)return!1;if(a.axisLine.show){const s=[];s.push(new o.Pa4(-r/2-this.getGripY(),t(n[0]),0)),s.push(new o.Pa4(-r/2-this.getGripY(),t(n[n.length-1])+2*i,0));const h=(new o.u9r).setFromPoints(s),c=new o.x12(h,new o.nls({color:a.axisLine.lineStyle.color,linewidth:a.axisLine.lineStyle.width}));e.add(c)}a.axisLabel.show&&n.forEach((e=>{this.createYText(e,t(e)+i)}))}createYText(t,e){const{maxData:n,maxHeight:r,textScene:i,opts:{yAxis:a}}=this,s=document.createElement("span"),o=String(n).length*a.axisLabel.fontSize*2;s.style.width=o+"px",s.style.textAlign="right",s.style.color=a.axisLabel.color,s.style.fontSize=a.axisLabel.fontSize+"px",s.innerText=t;const h=new Te(s);h.position.set(-r/2-o/2-this.getGripY()-20,e,0),i.add(h)}createXSplitLine(t,e){const{yScale:n,yData:r,maxHeight:i,yWidth:a,scene:s,opts:{xAxis:h}}=this;if(!h.splitLine.show)return!1;const{barWidth:c}=this.getBarWidth(),l=[],u=n(r[0]),d=-i/2-this.getGripY()+t;l.push(new o.Pa4(d,u,0)),l.push(new o.Pa4(d,u,0)),l.push(new o.Pa4(d,u,2*-c)),l.push(new o.Pa4(d,n(r[r.length-1])+2*a,2*-c));const p=(new o.u9r).setFromPoints(l),f=new o.x12(p,e?new o.FT0({color:h.splitLine.lineStyle.color,dashSize:1}):new o.nls({color:h.splitLine.lineStyle.color}));f.computeLineDistances(),s.add(f)}createMarkLine(t,e){const{yScale:n,xScale:r,yData:i,maxHeight:a,scene:s,yWidth:h,opts:{xAxis:c}}=this,l=r(t),u=n(i[0]),d=n(i[i.length-1])+2*h,p=[];p.push(new o.Pa4(-a/2-this.getGripY()+l,u,0)),p.push(new o.Pa4(-a/2-this.getGripY()+l,d,0));const f=(new o.u9r).setFromPoints(p),g=new o.x12(f,new o.FT0({color:this.getColor(e),dashSize:1}));g.computeLineDistances(),s.add(g),this.createXText(t,l,d+3*c.axisLabel.fontSize)}createXAxis(){const{yScale:t,yData:e,maxHeight:n,scene:r,opts:{xAxis:i}}=this;if(!i.show)return!1;if(i.axisLine.show){const a=[];a.push(new o.Pa4(-n/2-this.getGripY(),t(e[0]),0)),a.push(new o.Pa4(n/2-this.getGripY(),t(e[0]),0));const s=new o.x12((new o.u9r).setFromPoints(a),new o.nls({color:i.axisLine.lineStyle.color,linewidth:i.axisLine.lineStyle.width}));r.add(s)}this.addYText()}addYText(){const{maxData:t,minData:e,yScale:n,xScale:r,yData:i,opts:{yAxis:a}}=this;let s=4,o=0;if(t>=0&&0===e)o=t/s;else if(t>0&&e<0){let h=4;t>=Math.abs(e)?(o=t/s,h=Math.abs(e)/o):(o=Math.abs(e)/h,s=t/o);for(let t=0;t<=h;t++){const e=-t*o*1e10/1e10;a.axisLabel.show&&this.createXText(e,r(e),n(i[0])),this.createXSplitLine(r(e),t>0)}}else 0===t&&e<0&&(o=e/s);for(let h=0;h<=s;h++){const t=h*o*1e10/1e10;a.axisLabel.show&&this.createXText(t,r(t),n(i[0])),this.createXSplitLine(r(t),h>0)}}createBgPlane(){const{yData:t,maxHeight:e,scene:n,yWidth:r,opts:{grid:i,grid3D:a}}=this;if(!a.background.show)return!1;const{barWidth:s}=this.getBarWidth(),h=new o._12(e,2*r*t.length),c={transparent:!0,side:o.ehD,...a.background};delete c.show;const l=new o.Kj0(h,new o.YBo(c));l.position.set(-this.getGripY(),i.bottom-i.top,2*-s),n.add(l)}createBar(t,e,n){const{yData:r,maxHeight:i,zeroHeight:a,xScale:s,opts:h}=this,{barWidth:c,barGap:l}=this.getBarWidth(),{itemStyle:u={},data:d=[],originData:p=[],name:f}=h.series[e],g=s(p[n]),x=s(d[n]-p[n]),m=g-a,v=new o.DvJ(Math.abs(m),c,c);v.setAttribute("color",$e("#fff",!0));const y=new o.YBo({color:this.getColor(e),vertexColors:!0,transparent:!0,...u}),b=new o.Kj0(v,y);return b.position.set(-(i-m)/2+x-this.getGripY(),t*(c+l),0),b.itemData={x:r[n],y:p[n],name:f},h.grid3D.barAngle&&(b.rotation.x=Math.PI*h.grid3D.barAngle/180),b}createBarGroup(){const{yData:t,yScale:e,yWidth:n,scene:r,opts:i}=this,a=[],s=Array.from({length:t.length},(()=>new o.ZAu));i.series.forEach(((t,e)=>{t.markLine&&this.createMarkLine(t.markLine.value,e),a.find((e=>e===t.stack))||(t.stack?a.push(t.stack):a.push(e));const n=a.findIndex((n=>n===(t.stack||e)));t.data.forEach(((t,r)=>{if(r<s.length){const t=this.createBar(n,e,r);s[r].add(t),s[r].barNum=a.length}}))}));const{barWidth:h,barGap:c}=this.getBarWidth();s.forEach(((i,a)=>{let s=0;Array.from({length:i.barNum}).forEach(((t,e)=>{s+=0===e?h:c+h}));const o=e(t[a]);i.position.set(0,o+h/2-s/2+n,-h),r.add(i)}))}}const qe=Ge({},Ye,{radiusAxis:{show:!0,type:"category",data:[],axisLabel:{show:!0,fontSize:20,color:"#999"}},angleAxis:{max:0,min:0,startAngle:0},polar:{radius:["10%","80%"]},series:{itemStyle:{}}});class Ze extends Be{constructor(t,e={}){super(),this.el=t,t.style.position="relative",this.opts=Ge({},qe,e);const{grid3D:n,radiusAxis:r}=this.opts;this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,this.xAxixWidth=n.boxWidth||this.canvasWidth,this.xData=r.data,this.setMaxAndMin(),this.INTERSECTED=null,this.TIPDOM=null,this.raycaster=new o.iMs,this.pointer=new o.FM8,this.sceneChildren=[],this.textSceneChildren=[],this.init()}init(){this.createScale(),this.addScene(),this.addLight(),this.addCamera(),this.createBar(),this.addRenderer(),this.addControls(),this.render(),document.addEventListener("mousemove",this.onPointerMove),document.addEventListener("mouseleave",this.onMouseLeave),this.resize()}render=()=>{let{raycaster:t,camera:e,scene:n,textScene:r,controls:i,pointer:a}=this;t.setFromCamera(a,e);const{children:s}=n.children.find((t=>t.isGroup))||{children:[]},h=s.length>0?t.intersectObjects(s.filter((t=>t.isDataItem)),!0):[];h.length>0?this.INTERSECTED!=h[0].object&&(this.INTERSECTED&&(this.INTERSECTED.material.color=this.INTERSECTED.currentHex),this.INTERSECTED=h[0].object,this.INTERSECTED.currentHex=this.INTERSECTED.material.color,this.INTERSECTED.material.color=new o.Ilk(16711680)):(this.INTERSECTED&&(this.INTERSECTED.material.color=this.INTERSECTED.currentHex),this.INTERSECTED=null),i.update(),this.renderer.render(n,e),this.textRenderer.render(r,e),requestAnimationFrame(this.render)};update(t={}){this.opts=Ge({},qe,t),this.clear();const{grid3D:e,radiusAxis:n}=this.opts;this.xAxixWidth=e.boxWidth||this.canvasWidth,this.xData=n.data,this.setMaxAndMin(),this.createScale(),this.createBar()}resize(){this.resizeObser=new ResizeObserver((()=>{const{renderer:t,textRenderer:e,el:n,camera:r}=this;this.canvasWidth=n.clientWidth,this.canvasHeight=n.clientHeight,r.aspect=this.canvasWidth/this.canvasHeight,r.updateProjectionMatrix(),t.setSize(this.canvasWidth,this.canvasHeight),t.setPixelRatio(window.devicePixelRatio),e.setSize(this.canvasWidth,this.canvasHeight)})),this.resizeObser.observe(this.el)}setMaxAndMin(){const{series:t,angleAxis:e}=this.opts,n=Pe(t.data);this.maxData=Math.max(n.maxData,e.max),this.minData=Math.min(n.minData,e.min),this.maxData>Math.abs(this.minData)?this.minData=-this.maxData:this.maxData=-this.minData}getBarWidth(){const{grid3D:t,series:e}=this.opts,n=100/(e.data.length||1)+"%";let{barWidth:r=n}=t;return r="number"===typeof r?r:2*this.xWidth*parseFloat(r)/100,r}createScale(){const{opts:{polar:{radius:t}}}=this;let e=t[0],n=t[1];"string"===typeof e&&(e=Math.min(this.xAxixWidth,this.canvasHeight)*parseFloat(e)/100),"string"===typeof n&&(n=Math.min(this.xAxixWidth,this.canvasHeight)*parseFloat(n)/100),this.xScale=v().domain(this.xData).range([e,n]),this.xWidth=this.xScale.bandwidth()/2,this.yScale=De().domain([0,this.maxData]).range([0,2*Math.PI]),this.maxHeight=this.yScale(this.maxData)}createXRadiusText(t,e,n){const{angleAxis:r,radiusAxis:i}=this.opts,a=document.createElement("span");a.style.color=i.axisLabel.color,a.style.fontSize=i.axisLabel.fontSize+"px",a.innerText=t;const s=new Te(a);return n=n<0?i.axisLabel.fontSize:-i.axisLabel.fontSize,s.position.set(e,n,0),s.rotation.set(0,0,-r.startAngle/180*Math.PI),s}drawLoopShape(t,e,n,r){let i=[0,0],a=new o.bnF;a.moveTo(i[0],i[1]);const s=new o.Ny0(i[0],i[1],t,t,n,r),h=new o.Ny0(i[0],i[1],e,e,n,r),c=s.getPoints(500).reverse(),l=h.getPoints(500);a.moveTo(e*Math.cos(n)+i[0],e*Math.sin(n)+i[1]);for(const o of l)a.lineTo(o.x,o.y);for(const o of c)a.lineTo(o.x,o.y);return a}drawCircle(t,e,n,r,i=1,a={}){delete a.show;let s=this.drawLoopShape(t,e,n,r);const h=new o.O7d(s,{curveSegments:1e3,steps:1,depth:i,bevelEnabled:!1}),c=new o.YBo({transparent:!0,depthTest:!0,...a}),l=new o.Kj0(h,c);return l}createBar(){const{xData:t,xScale:e,yScale:n,opts:r}=this,{data:i}=r.series;let a=new o.ZAu,s=new o.ZAu;t.forEach(((o,h)=>{let c=e(o),l=c+this.getBarWidth(),u=0,d=n(Math.abs(i[h]));i[h]<0&&(u=2*Math.PI-d,d=2*Math.PI);let p=this.drawCircle(l,c,u,d,r.grid3D.barDepth,{color:r.color[0],...r.series.itemStyle});p.isDataItem=!0,p.itemData={x:t[h],y:i[h],name:"mesh"},a.add(p),a.add(this.drawCircle(l,c,0,2*Math.PI,1,{...r.grid3D.background})),r.radiusAxis.show&&r.radiusAxis.axisLabel.show&&s.add(this.createXRadiusText(o,(c+l)/2,i[h]))})),a.rotation.set(-.3,.2,r.angleAxis.startAngle/180*Math.PI),s.rotation.set(-.3,.2,r.angleAxis.startAngle/180*Math.PI),this.scene.add(a),this.textScene.add(s)}}function Ue(t,e){return e=e||{},e.xAxis&&"category"===e.xAxis.type?new Fe(t,e):e.yAxis&&"category"===e.yAxis.type?new Xe(t,e):e.radiusAxis?new Ze(t,e):void 0}const Ke={props:{width:{type:String,default:"600px"},height:{type:String,default:"400px"},options:{type:Object,default:()=>({})}},data(){return{barInstance:null}},watch:{options:{handler(t){this.update(t)},deep:!0}},mounted(){this.barInstance=Ue(this.$refs.bar,this.options)},destroyed(){this.destroy()},methods:{destroy(){this.barInstance.destroy()},update(t){this.barInstance.update(t)},clear(){this.barInstance.clear()}}},Ve=Ke;var Je=n(4697),Qe=(0,Je.Z)(Ve,a,s,!1,null,null,null);const tn=Qe.exports,en=tn,nn={components:{Bar:en},data(){return{baseOpts:{xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},series:[{name:"camera",data:[200,90,130,90,10,50,490]}]},groupOpts:{legend:{data:["蓝色","绿色"]},xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},series:[{name:"蓝色",data:[200,90,330,90,10,50,290]},{name:"绿色",data:[100,290,130,290,110,50,490]}]},negativeOpts:{xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},series:[{name:"camera",data:[200,90,-130,90,10,-50,490]}]},angleOpts:{legend:{data:["蓝色","绿色"]},xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},grid3D:{boxWidth:500,barWidth:"25%",barGap:20,barAngle:45},series:[{name:"蓝色",data:[200,90,330,90,10,50,290],itemStyle:{opacity:.5,color:"#ff0"}},{name:"绿色",data:[100,290,130,290,110,50,490]}]},sectionOpts:{legend:{data:["蓝色","绿色"]},grid3D:{background:{show:!1}},xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},series:[{name:"蓝色",data:[200,90,330,90,10,50,290],stack:"total",itemStyle:{opacity:0}},{name:"绿色",data:[100,290,130,290,110,50,490],stack:"total"}]},stackOpts:{legend:{data:["蓝色","绿色","黄色"]},xAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},series:[{name:"蓝色",stack:"total",data:[360,200,30,54,66,10,50,100]},{name:"绿色",stack:"total",data:[200,90,130,90,10,50,90,40]},{name:"黄色",stack:"total",data:[120,30,200,190,110,150,40,140]}]},horizOpts:{legend:{data:["蓝色","render","camera"]},grid:{top:20,bottom:60},yAxis:{type:"category",data:["周日","周一","周二","周三","周四","周五","周六"]},grid3D:{barWidth:30,barAngle:0},series:[{name:"蓝色",stack:"total",data:[360,200,30,54,66,10,50,100],markLine:{value:200}},{name:"render",stack:"total",data:[290,190,30,20,110,150,190]},{name:"camera",data:[200,90,130,90,10,50,490,40]}]},loopOpts:{radiusAxis:{data:["aaaa","b","c","d"]},angleAxis:{max:0,min:0,startAngle:0},polar:{radius:["10%","80%"]},grid3D:{barWidth:"50%",barDepth:50},series:{data:[2,1.2,-2.4,3.6]}}}},mounted(){}},rn=nn;var an=(0,Je.Z)(rn,r,i,!1,null,"049a2692",null);const sn=an.exports}}]);
//# sourceMappingURL=870.310335ca.js.map